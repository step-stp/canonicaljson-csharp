using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.Text;
using System.IO;
using Stratumn.Canonical;
using System.Collections.Generic;
using System.Text.RegularExpressions;
using java.math;
using System.Linq;

namespace UnitTestCanonical
{
    /// <summary>
    /// @copyRight Stratumn
    /// </summary>
    [TestClass]
    public class TransformerTest
    {


        [TestMethod]
        public void TestTransformerSanity()
        {

            String[]
            inputExpected = new String[] { 
       "11E-3,-11E-3,1E-1000,0.01",
       "1.1E-2,-1.1E-2,1.0E-1000,1.0E-2",
        "3.14,3.14E0,0.314E1,31.4E-1,11E-3,179.769313486231590772930519078902473361797697894230657273430081157732675805500963132708477322407536021120113879871393357658789768814416622492847430639474124377767893424865485276302219601246094119453082952085005768838150682342462881473913110540827237163350510684586298239947245938479716304835356329624224137217E305,17976931348623159077293051907890247336179769789423065727343008115773267580550096313270847732240753602112011387987139335765878976881441662249284743063947412437776789342486548527630221960124609411945308295208500576883815068234246288147391311054082723716335051068458629823994724593847971630483535632962422413721.7,-3.14,-3.14E0,-0.314E1,-31.4E-1,-11E-3,-179.769313486231590772930519078902473361797697894230657273430081157732675805500963132708477322407536021120113879871393357658789768814416622492847430639474124377767893424865485276302219601246094119453082952085005768838150682342462881473913110540827237163350510684586298239947245938479716304835356329624224137217E305,-17976931348623159077293051907890247336179769789423065727343008115773267580550096313270847732240753602112011387987139335765878976881441662249284743063947412437776789342486548527630221960124609411945308295208500576883815068234246288147391311054082723716335051068458629823994724593847971630483535632962422413721.7",
        "3.14E0,3.14E0,3.14E0,3.14E0,1.1E-2,1.79769313486231590772930519078902473361797697894230657273430081157732675805500963132708477322407536021120113879871393357658789768814416622492847430639474124377767893424865485276302219601246094119453082952085005768838150682342462881473913110540827237163350510684586298239947245938479716304835356329624224137217E307,1.79769313486231590772930519078902473361797697894230657273430081157732675805500963132708477322407536021120113879871393357658789768814416622492847430639474124377767893424865485276302219601246094119453082952085005768838150682342462881473913110540827237163350510684586298239947245938479716304835356329624224137217E307,-3.14E0,-3.14E0,-3.14E0,-3.14E0,-1.1E-2,-1.79769313486231590772930519078902473361797697894230657273430081157732675805500963132708477322407536021120113879871393357658789768814416622492847430639474124377767893424865485276302219601246094119453082952085005768838150682342462881473913110540827237163350510684586298239947245938479716304835356329624224137217E307,-1.79769313486231590772930519078902473361797697894230657273430081157732675805500963132708477322407536021120113879871393357658789768814416622492847430639474124377767893424865485276302219601246094119453082952085005768838150682342462881473913110540827237163350510684586298239947245938479716304835356329624224137217E307"
      };

            var separator = new Char[] { ',' };
            var array = inputExpected[0].Split(separator);

            List<BigDecimal> bd = array.Select(st => new BigDecimal(st)).ToList();

            String value = new Transformer().Transform(new List<Object>(bd));
            List<String> bdActualList = value.Substring(1, value.Length - 2).Split(separator).ToList();

            List<String> bdExpectedList = inputExpected[1].Split(separator).ToList();
            List<String> bdInputList = inputExpected[0].Split(separator).ToList();

            for (int i = 0; i < bdInputList.Count; i++)
            {
                Assert.AreEqual(bdExpectedList[i].ToString(), bdActualList[i].ToString());

            }
        }

    }
}
